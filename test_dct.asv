img = imread('foreman0020.bmp');
img = double(img);
img = ictRGB2YCbCr(img);
im_dct = blockproc(img,[4,4],@(block_struct) DCT4X4(block_struct.data));
im_quant = blockproc(im_dct,[4,4],@(block_struct) Quant4x4(block_struct.data,qScale));
image_dequant = blockproc(im_quant,[4,4],@(block_struct) DeQuant4x4(block_struct.data,qScale));
im_idct = blockproc(image_dequant,[4,4],@(block_struct) IDCT4x4(block_struct.data));
im_idct = 
im_idct = uint8(im_idct);
calcPSNR(rgbimage(:,:,:,seq),im_rec_rgb(:,:,:,seq))
imshow(im_idct);